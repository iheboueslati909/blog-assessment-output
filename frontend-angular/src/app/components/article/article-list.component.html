<div class="p-6 space-y-6">

  <!-- Articles Section Card -->
  <div class="bg-gray-800 p-6 rounded-lg shadow-md space-y-4">
    <!-- Header -->
    <div class="flex items-center justify-between mb-4">
      <h1 class="page-title text-2xl font-bold text-white">Articles</h1>
      <button (click)="create()" 
              class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded shadow">
        New Article
      </button>
    </div>

    <!-- Loading & Error -->
    <div *ngIf="loading" class="text-gray-400">Loading...</div>
    <div *ngIf="error" class="text-red-500 font-medium">{{ error }}</div>

    <!-- Article List -->
    <ng-container *ngIf="!loading && !error">
      <ng-container *ngIf="articles && articles.length > 0; else noArticles">
        <ul class="space-y-4">
          <li *ngFor="let a of articles" (click)="view(a)"
              class="cursor-pointer flex gap-4 p-4 bg-gray-900 rounded-lg shadow-sm hover:shadow-lg transition">

            <!-- Image with left-side gradient -->
            <div class="relative w-24 h-24 flex-shrink-0 overflow-hidden rounded-md">
              <img [src]="getImageUrl(a.image)" (error)="onImageError($event)"
                   alt="{{ a.title }}" 
                   class="w-full h-full object-cover">
              <div class="absolute inset-0 bg-gradient-to-l from-black/60 to-transparent"></div>
            </div>

            <!-- Article Info -->
            <div class="flex-1 space-y-1">
              <h3 class="text-lg font-semibold text-white">{{ a.title || 'Untitled' }}</h3>
              <p class="text-sm text-gray-400">
                By {{ a.authorId || 'Unknown author' }} Â· {{ (a.createdAt | date:'medium') || 'Unknown date' }}
              </p>

              <div *ngIf="a.tags && a.tags.length > 0" class="mt-1 flex flex-wrap gap-2">
                <span *ngFor="let tag of a.tags" class="text-xs bg-gray-700 text-gray-200 px-2 py-0.5 rounded">{{ tag }}</span>
              </div>

              <p class="text-gray-200 mt-2">{{ (a.content || '') | slice:0:150 }}{{ (a.content.length || 0) > 150 ? '...' : '' }}</p>
            </div>
          </li>
        </ul>
      </ng-container>

      <ng-template #noArticles>
        <p class="text-gray-400">No articles found.</p>
      </ng-template>
    </ng-container>
  </div>
</div>
